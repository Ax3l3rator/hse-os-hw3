# ИДЗ-3 Коледаев Алексей Дмитриевич | БПИ-213

# Вариант 16 | Отчет

## Условие

На клумбе растет 40 цветов, за ними непрерывно следят два процесс–садовника и поливают увядшие цветы,
при этом оба садовника очень боятся полить один и тот же цветок, который еще не начал вянуть. **Создать приложение, моделирующее состояния цветков на клумбе и действия садовников.** _Сервер используется для обмена информацией между
клиентами садовниками и клиентом — клумбой. Клумба — клиент, отслеживающий состояния всех цветов. Каждый садовник
— отдельный клиент._

## Сценарий

### Клумба (flowerbed)

- Создание сокета для передачи данных по протоколу TCP.
- Подключение к серверу.
- Отправка на сервер сообщения о запуске клиента. Получение сообщения с режимом работы.
- По циклу получение сообщений от сервера и обработка их содержимого.
- Если получено сообщение о необходимости получения состояния цветка, отправка сообщения с текущим состоянием.
- Если получено сообщение о поливе цветка, изменение состояния цветка на "поливается".
- Если получено сообщение об окончании полива цветка, изменение состояния цветка на "здоровый" через 1 секунду и отправка сообщения на сервер о необходимости прополоть ещё цветок.
- По окончании работы -- закрытие сокета и завершение программы.

### Садовник (gardener)

- Создание сокета для передачи данных по протоколу TCP.
- Подключение к серверу.
- Отправка на сервер сообщения о запуске клиента. Получение сообщения с режимом работы.
- По циклу получение сообщений от сервера и обработка их содержимого.
- Если получено сообщение о вянущем цветке программа выполняет критическую секцию с запросом на сервер и получением данных о цветке, чтобы не полить его два раза, после того, как информация была получена, в зависимости от статуса цветка, программа либо идёт дальше, либо поливает этот цветок, отправляя запросы на сервер
- По окончании работы -- закрытие сокета и завершение программы.

### Сервер (manager)

Создает три сокета для подключения, ждет подключения необходимых клиентов и начинает симуляцию, является проводником и распределителем данных для всего проекта. ctrl_c убьет все дочерние процессы и закроет все сокеты, клиенты отключатся.
